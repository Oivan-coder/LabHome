// ===== –ú–û–î–£–õ–¨ –ú–û–î–ê–õ–¨–ù–´–• –û–ö–û–ù –î–õ–Ø –°–ü–ï–¶–ò–ê–õ–ò–°–¢–û–í =====

// –î–∞–Ω–Ω—ã–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤
const specialistsData = {
    1: {
        name: "–©–µ–±–ª—ã–∫–∏–Ω–∞-–ú–æ–Ω–∞—Å—Ç—ã—Ä—ë–≤–∞ –ò—Ä–∏–Ω–∞ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞",
        role: "–ö—É—Ä–∞—Ç–æ—Ä —Ä–µ—Ñ–µ—Ä–µ–Ω—Å-—Ü–µ–Ω—Ç—Ä–∞",
        bio: "–ì–ª–∞–≤–Ω—ã–π –≤–Ω–µ—à—Ç–∞—Ç–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∫–ª–∏–Ω–∏—á–µ—Å–∫–æ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ. –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ ¬´–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Å–ª—É–∂–±—ã¬ª –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏.",
        photo: "images/team/irina-scheblykina.jpg",
        contacts: [
            { type: "phone", value: "+79958832336", label: "–¢–µ–ª–µ—Ñ–æ–Ω", icon: "üìû" },
            { type: "whatsapp", value: "+79958832336", label: "WhatsApp", icon: "üí¨" },
            { type: "telegram", value: "doc_kld", label: "Telegram", icon: "‚úàÔ∏è" },
            { type: "email", value: "ScheblykinaIV@mosreg.ru", label: "Email", icon: "üìß" }
        ]
    },
    2: {
        name: "–î–µ–Ω–∏—Å–æ–≤–∞ –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –ê–Ω–∞—Ç–æ–ª—å–µ–≤–Ω–∞",
        role: "–ó–∞–≤–µ–¥—É—é—â–∏–π —Ä–µ—Ñ–µ—Ä–µ–Ω—Å-—Ü–µ–Ω—Ç—Ä–æ–º",
        bio: "–ó–∞–≤–µ–¥—É—é—â–∏–π —Ä–µ—Ñ–µ—Ä–µ–Ω—Å-—Ü–µ–Ω—Ç—Ä–æ–º –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Å–ª—É–∂–±—ã –ú–û",
        photo: "images/team/ekaterina-denisova.jpg",
        contacts: [
            { type: "phone", value: "+79933521997", label: "–¢–µ–ª–µ—Ñ–æ–Ω", icon: "üìû" },
            { type: "whatsapp", value: "+79933521997", label: "WhatsApp", icon: "üí¨" },
            { type: "telegram", value: "lab_docc", label: "Telegram", icon: "‚úàÔ∏è" }
        ]
    },
    3: {
        name: "–ì–æ–ª—å—Ü–µ–≤ –ò–≤–∞–Ω –ú–∏—Ö–∞–π–ª–æ–≤–∏—á",
        role: "–í–µ–¥—É—â–∏–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç",
        bio: "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–º—É –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—é –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–µ",
        photo: "images/team/ivan-goltsev.jpg",
        contacts: [
            { type: "whatsapp", value: "+79778290881", label: "WhatsApp", icon: "üí¨" },
            { type: "telegram", value: "ivan_goltsev", label: "Telegram", icon: "‚úàÔ∏è" }
        ]
    },
    4: {
        name: "–ö–æ–Ω–¥—Ä–∞—Ç–æ–≤ –£—Å—Ç–∏–Ω –°–µ—Ä–≥–µ–µ–≤–∏—á",
        role: "–í–µ–¥—É—â–∏–π —ç–∫–æ–Ω–æ–º–∏—Å—Ç",
        bio: "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–º—É –∞–Ω–∞–ª–∏–∑—É –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Å–ª—É–∂–±—ã",
        photo: "images/team/ustin-kondratov.jpg",
        contacts: [
            { type: "whatsapp", value: "+79670252747", label: "WhatsApp", icon: "üí¨" },
            { type: "telegram", value: "ssorf7", label: "Telegram", icon: "‚úàÔ∏è" }
        ]
    },
    5: {
        name: "–ö–∞–ø–ª–∏–Ω–∞ –ê–Ω–Ω–∞ –í–∞–ª–µ—Ä—å–µ–≤–Ω–∞",
        role: "–ê–Ω–∞–ª–∏—Ç–∏–∫",
        bio: "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∞–Ω–∞–ª–∏–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",
        photo: "images/team/anna-kaplina.jpg",
        contacts: [
            { type: "whatsapp", value: "+79637516163", label: "WhatsApp", icon: "üí¨" },
            { type: "telegram", value: "Annkey", label: "Telegram", icon: "‚úàÔ∏è" }
        ]
    }
};

/**
 * –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞
 * @param {number} specialistId - ID —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞
 */
function openSpecialistModal(specialistId) {
    const specialist = specialistsData[specialistId];
    if (!specialist) return;
    
    const modal = document.getElementById('specialistModal');
    const modalBody = document.getElementById('specialistModalBody');
    
    if (!modal || !modalBody) return;
    
    // –û—á–∏—â–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
    modalBody.textContent = '';
    
    // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ
    const photoContainer = document.createElement('div');
    photoContainer.className = 'modal-photo';
    
    const img = document.createElement('img');
    img.src = specialist.photo;
    img.alt = specialist.name;
    img.loading = 'lazy';
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    img.addEventListener('error', function() {
        this.style.display = 'none';
        const emoji = specialist.photo.includes('irina') ? 'üë©‚Äç‚öïÔ∏è' : 
                     specialist.photo.includes('ekaterina') ? 'üë®‚Äçüíº' : 
                     specialist.photo.includes('ivan') ? 'üîß' : 
                     specialist.photo.includes('ustin') ? 'üíº' : 'üìä';
        photoContainer.textContent = emoji;
        photoContainer.style.fontSize = '4rem';
        photoContainer.style.textAlign = 'center';
        photoContainer.style.padding = '2rem';
    });
    
    photoContainer.appendChild(img);
    
    const name = document.createElement('h2');
    name.className = 'modal-name';
    name.textContent = specialist.name;
    
    const role = document.createElement('div');
    role.className = 'modal-role';
    role.textContent = specialist.role;
    
    const bio = document.createElement('div');
    bio.className = 'modal-bio';
    bio.textContent = specialist.bio;
    
    const contactsContainer = document.createElement('div');
    contactsContainer.className = 'modal-contacts';
    
    specialist.contacts.forEach(contact => {
        const link = document.createElement('a');
        const safeUrl = window.createSafeUrl ? window.createSafeUrl(contact.type, contact.value) : '#';
        link.href = safeUrl;
        link.className = `modal-contact-link ${contact.type}`;
        
        if (contact.type === 'whatsapp' || contact.type === 'telegram') {
            link.target = '_blank';
            link.rel = 'noopener noreferrer';
        }
        
        const icon = document.createElement('span');
        icon.textContent = contact.icon;
        link.appendChild(icon);
        
        const label = document.createTextNode(contact.label);
        link.appendChild(label);
        
        contactsContainer.appendChild(link);
    });
    
    // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã
    modalBody.appendChild(photoContainer);
    modalBody.appendChild(name);
    modalBody.appendChild(role);
    modalBody.appendChild(bio);
    modalBody.appendChild(contactsContainer);
    
    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
}

/**
 * –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞
 */
function closeSpecialistModal() {
    const modal = document.getElementById('specialistModal');
    if (modal) {
        modal.classList.remove('active');
        document.body.style.overflow = '';
    }
}

/**
 * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–û –Ω–∞—Å"
 */
function initAboutPageAnimations() {
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ ESC
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            const specialistModal = document.getElementById('specialistModal');
            if (specialistModal && specialistModal.classList.contains('active')) {
                closeSpecialistModal();
            }
        }
    });
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    const modalOverlay = document.getElementById('modalOverlay');
    const modalCloseBtn = document.getElementById('modalCloseBtn');
    
    if (modalOverlay) {
        modalOverlay.addEventListener('click', closeSpecialistModal);
    }
    
    if (modalCloseBtn) {
        modalCloseBtn.addEventListener('click', closeSpecialistModal);
    }
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫
    const cards = document.querySelectorAll('.specialist-card');
    cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(30px)';
        card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
        
        setTimeout(() => {
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, 100 * index);
    });
}

// –≠–∫—Å–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–π
window.openSpecialistModal = openSpecialistModal;
window.closeSpecialistModal = closeSpecialistModal;
window.initAboutPageAnimations = initAboutPageAnimations;
